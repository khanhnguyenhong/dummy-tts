(self.webpackChunkdummy_tts=self.webpackChunkdummy_tts||[]).push([[297],{2634:()=>{},3268:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(2555),s=n(5043),a=n(3536),r=n(579);const i=()=>{const[t,e]=s.useState(""),[i,c]=s.useState(""),[l,p]=s.useState(""),[h,u]=s.useState(1),[d,y]=s.useState(!1);let g={};const x=()=>{const t=localStorage.getItem("preTTVHistory");if(t)try{g=JSON.parse(t)}catch(e){g={}}},v=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const n=(0,a.isEmpty)(t)?i:t;localStorage.setItem("preTTVLink",n),x(),localStorage.setItem("preTTVHistory",JSON.stringify((0,o.A)((0,o.A)({},g),{},{[l]:h}))),e("Fetching "+n),fetch("/api/fetch-data",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({url:n})}).then((()=>{e("Done")})).catch((()=>{e("Error")}))},f=t=>{const e=n(2908).parse(t.split("?")[1]);console.log(e.story_id),console.log(e.sort_by_ttv),p(e.story_id),u(e.sort_by_ttv)},b=t=>{let{newStoryId:e,newChapter:n}=t;const o="https://tangthuvien.net/get-4-chap?story_id=".concat(e||l,"&sort_by_ttv=").concat(n||h);c(o)};return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"300px",margin:"auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,r.jsx)("button",{type:"button",onClick:()=>{const t=localStorage.getItem("preTTVLink");c(t),f(t)},children:"Load Previous Link"}),(0,r.jsx)("button",{type:"button",onClick:()=>{x(),e(JSON.stringify(g))},children:"Fetch History"}),(0,r.jsx)("button",{type:"button",onClick:()=>{let t=new XMLHttpRequest;t.onreadystatechange=function(){4===this.readyState&&200===this.status&&e(this.responseText)},t.open("GET","/api/fetch-history",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send()},children:"Fetch History from Server"})]}),(0,r.jsx)("textarea",{type:"text",placeholder:"Url",value:i,onChange:t=>{const e=t.target.value;c(e),f(e)}}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,r.jsx)("input",{type:"text",placeholder:"story_id",value:l,onChange:t=>{p(t.target.value),b({newStoryId:t.target.value})}}),(0,r.jsx)("input",{type:"text",placeholder:"chapter",value:h,onChange:t=>{u(t.target.value),b({newChapter:t.target.value})}})]}),(0,r.jsx)("button",{type:"button",onClick:()=>v(),children:"Fetch"}),(0,r.jsx)("button",{type:"button",onClick:()=>(t=>{const e=parseInt(h)+t;u(e),b({newChapter:e});const n="https://tangthuvien.net/get-4-chap?story_id=".concat(l,"&sort_by_ttv=").concat(e);v(n)})(4),children:"Fetch next 4 chapters"}),(0,r.jsx)("button",{type:"button",onClick:()=>{let t=new XMLHttpRequest;t.onreadystatechange=function(){4===this.readyState&&200===this.status&&e(this.responseText)},t.open("GET","/api/retrive-data",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send()},children:"Show data"}),(0,r.jsxs)("button",{type:"button",onClick:()=>y(!d),children:["Sneak: ",d?"Yes":"No"]}),(0,r.jsx)("div",{style:{maxHeight:"400px",overflow:"auto",color:d&&(null===t||void 0===t?void 0:t.length)>20?"rgb(37, 38, 38)":"gray"},dangerouslySetInnerHTML:{__html:t}})]})}}}]);
//# sourceMappingURL=297.26782a87.chunk.js.map