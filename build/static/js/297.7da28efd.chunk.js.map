{"version":3,"file":"static/js/297.7da28efd.chunk.js","mappings":"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","sources":["components/TTVFetcher.js"],"sourcesContent":["import React from \"react\";\nimport { isEmpty } from \"lodash\";\n\nconst TTVFetcher = () => {\n    // https://tangthuvien.net/get-4-chap?story_id=38060&sort_by_ttv=10\n    const [fetchedData, setFetchedData] = React.useState(\"\");\n    const [currentLink, setCurrentLink] = React.useState(\"\");\n    const [storyId, setStoryId] = React.useState(\"\");\n    const [chapter, setChapter] = React.useState(1);\n\n    const fetchData = (input = '') => {\n        const url = isEmpty(input) ? currentLink : input;\n        localStorage.setItem('preTTVLink', url);\n        setFetchedData(\"Fetching \" + url);\n        fetch(\"/api/fetch-data\", {\n            method: \"POST\",\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                url,\n            }),\n        }).then(() => {\n            setFetchedData(\"Done\");\n        }).catch(() => {\n            setFetchedData(\"Error\");\n        });\n    }\n\n    const loadLink = () => {\n        const newLink = localStorage.getItem('preTTVLink');\n        setCurrentLink(newLink);\n        setCustomLinkData(newLink);\n    }\n\n    const retriveData = () => {\n        let xhttp = new XMLHttpRequest();\n        xhttp.onreadystatechange = function () {\n            if (this.readyState === 4 && this.status === 200) {\n                setFetchedData(this.responseText);\n            }\n        };\n        xhttp.open(\"GET\", \"/api/retrive-data\", true);\n        xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n        xhttp.send();\n    }\n\n    const setCustomLinkData = (newLink) => {\n        const qs = require('qs');\n        const params = qs.parse(newLink.split('?')[1]);\n        console.log(params.story_id);\n        console.log(params.sort_by_ttv);\n        setStoryId(params.story_id);\n        setChapter(params.sort_by_ttv);\n    }\n\n    const onChangeCurrentLink = (e) => {\n        const newLink = e.target.value;\n        setCurrentLink(newLink);\n        setCustomLinkData(newLink);\n    }\n\n    const editLink = ({ newStoryId, newChapter }) => {\n        const newLink = `https://tangthuvien.net/get-4-chap?story_id=${newStoryId || storyId}&sort_by_ttv=${newChapter || chapter}`\n        setCurrentLink(newLink);\n    }\n\n    const onChangeStoryId = (e) => {\n        setStoryId(e.target.value);\n        editLink({\n            newStoryId: e.target.value\n        })\n    }\n\n    const onChangeChapter = (e) => {\n        setChapter(e.target.value);\n        editLink({\n            newChapter: e.target.value\n        })\n    }\n\n    const fetchNextChapters = (number) => {\n        const nextChapter = parseInt(chapter) + number;\n        setChapter(nextChapter);\n        editLink({\n            newChapter: nextChapter\n        })\n        const newLink = `https://tangthuvien.net/get-4-chap?story_id=${storyId}&sort_by_ttv=${nextChapter}`\n        fetchData(newLink);\n    }\n\n    return (\n        <div style={{ display: \"flex\", flexDirection: \"column\", width: \"300px\", margin: \"auto\" }}>\n            <button type=\"button\" onClick={loadLink}>\n                Load Previous Link\n            </button>\n            <textarea type=\"text\" placeholder=\"Url\" value={currentLink} onChange={onChangeCurrentLink} />\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n                <input type=\"text\" placeholder=\"story_id\" value={storyId} onChange={onChangeStoryId} />\n                <input type=\"text\" placeholder=\"chapter\" value={chapter} onChange={onChangeChapter} />\n            </div>\n            <button type=\"button\" onClick={() => fetchData()}>\n                Fetch\n            </button>\n            <button type=\"button\" onClick={() => fetchNextChapters(4)}>\n                Fetch next 4 chapters\n            </button>\n            <button type=\"button\" onClick={retriveData}>\n                Show data\n            </button>\n            <div style={{ maxHeight: \"400px\", overflow: \"auto\" }} dangerouslySetInnerHTML={{ __html: fetchedData }}>\n            </div>\n        </div >\n    )\n}\n\nexport default TTVFetcher"],"names":["TTVFetcher","fetchedData","setFetchedData","React","currentLink","setCurrentLink","storyId","setStoryId","chapter","setChapter","fetchData","input","arguments","length","undefined","url","isEmpty","localStorage","setItem","fetch","method","headers","Accept","body","JSON","stringify","then","catch","setCustomLinkData","newLink","params","require","parse","split","console","log","story_id","sort_by_ttv","editLink","_ref","newStoryId","newChapter","concat","_jsxs","style","display","flexDirection","width","margin","children","_jsx","type","onClick","loadLink","getItem","placeholder","value","onChange","e","target","number","nextChapter","parseInt","fetchNextChapters","retriveData","xhttp","XMLHttpRequest","onreadystatechange","this","readyState","status","responseText","open","setRequestHeader","send","maxHeight","overflow","dangerouslySetInnerHTML","__html"],"sourceRoot":""}